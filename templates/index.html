<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“– ã‚ãªãŸã®æ—¥è¨˜</title>
  <link rel="stylesheet" href="static/style.css">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar collapsed" id="sidebar">
      <button class="sidebar-toggle" onclick="toggleSidebar()">ğŸ“Œ</button>
      <div class="sidebar-content">
        <h2>ğŸ“– Diary Menu</h2>

        <a href="/logout" class="logout-btn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content expanded" id="main-content">
      <h1>ğŸ“– ã‚ãªãŸã®æ—¥è¨˜ - {{ user }}</h1>

      <!-- Entry Form -->
      <div class="entry-form">
        <form action="/send" method="POST" enctype="multipart/form-data">
          <textarea name="message" rows="4" placeholder="âœï¸ ä½•ã‚’è€ƒãˆã¦ã„ã¾ã™ã‹ï¼Ÿ"></textarea>
          <input type="file" name="image">
          <button type="submit">â• æ—¥è¨˜ã‚’è¿½åŠ </button>
        </form>
      </div>

      <!-- Display Diary Entries -->
      {% for msg in messages %}
        <div class="entry-box">
          <p class="entry-text">{{ msg.text }}</p>
          {% if msg.image %}
            <img src="{{ url_for('static', filename='uploads/' + msg.image) }}" class="entry-image">
          {% endif %}
          <small class="entry-date">{{ msg.date }}</small>

          <!-- Edit & Delete Options -->
          <div class="entry-actions">
            <a href="/edit/{{ loop.index0 }}" class="edit-btn">âœï¸ ç·¨é›†</a>
            <form action="/delete/{{ loop.index0 }}" method="POST">
              <button type="submit" class="delete-btn">ğŸ—‘ï¸ å‰Šé™¤</button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  <!-- Sidebar Toggle Script -->
  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      const mainContent = document.getElementById("main-content");

      // Toggle the 'collapsed' class on the sidebar
      sidebar.classList.toggle("collapsed");

      // Adjust main content width
      if (sidebar.classList.contains("collapsed")) {
        mainContent.classList.add("expanded");
      } else {
        mainContent.classList.remove("expanded");
      }
    }
  </script>
</body>
</html>
